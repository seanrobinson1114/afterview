/*
 * Performs high level tasks like starting server, connecting to db, and registering routes
 * author@ sean
 */

const express = require( 'express' ),
  app = express(),
  port = 3000,
  mongoose = require( 'mongoose' ),
  reqister1 = require( './api/models/PastTripsModel' ),
  register2 = require( './api/models/VisitedLocationsModel' ),
  register3 = require( './api/models/UsersModel' ),
  register4 = require( './api/models/ScheduledTripsModel' ),
  bodyParser = require( 'body-parser' ),
  routes = require( './api/routes/Routes' );

// Prevents error from outdated bodyParser function
//app.use( bodyParser() );

// Connect to mongodb schema
//mongoose.connect( 'mongodb://seanrobinson1114:MKErowing16!@clusterdev-shard-00-00-eszne.mongodb.net:27017,clusterdev-shard-00-01-eszne.mongodb.net:27017,clusterdev-shard-00-02-eszne.mongodb.net:27017/perhubd?ssl=true&replicaSet=ClusterDev-shard-0&authSource=admin' );

mongoose.connect( 'mongodb://tuser:passwillow@ds129146.mlab.com:29146/afterview' );

//app.use( bodyParser.urlencoded( { extended: true } ) );
//app.use( bodyParser.json() );

// Register custom routes
routes( app );

// Serve static directories
//app.use( express.static( 'public' ) );

// Start the application
app.listen( port );

console.log( 'personal_hub app running on port: ' + port);
